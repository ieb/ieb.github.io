---
layout: post
title: OSX network errors
date: 2008-09-04 12:18:34.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Thought
tags: []
meta:
  _edit_last: '1'
  _oembed_25c1be664c72c6997d9cf8e039315d28: "{{unknown}}"
  _oembed_29fb5472ea6c2e065bb1be95ed248df3: "{{unknown}}"
author:
  login: iebtfdcouk
  email: ieb@tfd.co.uk
  display_name: Ian
  first_name: Ian
  last_name: Boston
permalink: "/2008/09/04/osx-network-errors/"
---
<p>OSX has a bug in its network stack, apparently associated with a 10.5 update, but it appears to fix slow performance on large file transfers on Tiger as well. Details are <a href="http://gp.darkproductions.com/2008/03/fix-for-slow-wifi-80211-file-transfers.html">http://gp.darkproductions.com/2008/03/fix-for-slow-wifi-80211-file-transfers.html</a> here. </p>
<p>The main issue is the ack response, where both machines back of and wait for the other to ack, being far to polite. It appears to have fixed things for me backing up on a very very slow time capsule, which is not fast again.</p>
<p>The commands to reduce the ack are </p>
<pre>sysctl -w net.inet.tcp.delayed_ack=0</pre>
<p>and to set it back to defailt </p>
<pre>sysctl -w net.inet.tcp.delayed_ack=3</pre>
<p>and to list it</p>
<pre>sysctl net.inet.tcp.delayed_ack</pre>
<p>The annoying part is, if the a network mounted disk is mounted over a dodgy tcp connection, it will loose the mount and stall other disk activities. This can turn up as slow response, rather than total loss of the mount.</p>
